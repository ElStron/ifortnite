---
import Layout from '@/layouts/Layout.astro';
import BaseSection from '@/components/BaseSection.astro';
import IslandCard from '@/components/IslandCard.astro';
import { getI18N } from "@/i18n"
const { currentLocale } = Astro
const i18n = getI18N({ currentLocale })

const response = await fetch('https://race.f1calendar.live/creative')
const data = await response.json();
const sections = data;
---

<Layout title={i18n.CREATIVE.TITLE_SEO} description={i18n.CREATIVE.DESCRIPTION_SEO}>
    {
        sections.map((section: any) => {
    
            return (
                section.islands.length > 0 &&
                <BaseSection title={section.category.label}>
                    {
                        section.islands.map((island: any) => {
                            return (
                                <li>
                                    <IslandCard code={island.islandCode} image={island.imgSrc} title={island.title} />
                                </li>
                            )
                        })
                    }
                </BaseSection>
            )
            
        })
    }
    
</Layout>